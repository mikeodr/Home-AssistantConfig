- alias: Exterior Lights on Evenings
  trigger:
     platform: sun
     event: sunset
  action:
     service: homeassistant.turn_on
     entity_id: group.exterior_lights

- alias: Exterior Lights off Night
  trigger:
    platform: time
    at: '23:30:00'
  action:
    - service: homeassistant.turn_off
      entity_id: group.exterior_lights

- alias: Keep Exterior Lights off during daylight
  trigger:
    platform: state
    entity_id: group.exterior_lights
    to: 'on'
    for:
      minutes: 30
  condition:
    condition: state
    entity_id: sun.sun
    state: 'above_horizon'
  action:
    - service: homeassistant.turn_off
      entity_id: group.exterior_lights

- alias: Sync Exterior Lights
  trigger:
    platform: state
    entity_id:
      # Can't trigger on group, one switch turing off
      # Leaves the group on, so has to be multiple entities
      - switch.front_porch
      - switch.side_door
  action:
    service_template: >
      homeassistant.turn_{{ trigger.to_state.state }}
    entity_id: group.exterior_lights